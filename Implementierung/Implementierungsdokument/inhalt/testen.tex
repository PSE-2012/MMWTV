\chapter{Automatisierte Tests}
Fast alle Teile des Projekts wurden mit Hilfe von automatisierten Komponententests (unit tests) getestet. Im folgenden eine Übersicht über die Testfälle aller Komponenten, sowie Statistiken über die erreichte Codeabdeckung.
Im Zusammenhang mit den beschriebenen Tests werden auch damit entdeckte und behobene Fehler dargestellt.


\section{PluginManager}
\paragraph*{Testfälle}
\begin{itemize}
\item pluginManager singleton getter
\item Initialization: no PluginDir
\item Initialization: invalid dll
\item Initialization: valid dll, no plugin
\item Initialization: plugin dll, outdated interface IPlugin
\item Initialization: plugin dll, outdated interface IFilterOqat
\item Initialization: add plugins
\item Initialization: add Plugin dll after loading
\item Initialization: add duplicate Plugin

\item getPluginNames: ok
\item getPluginNames: empty list
\item getPlugin: IPlugin + name null
\item getPlugin: IPlugin + name empty
\item getPlugin: IPlugin + name not existing
\item getPlugin: IPlugin + name existing
\item getPlugin: detail interface + name existing
\item getPlugin: name existing for different type

\item addMemento: pluginname null
\item addMemento: no plugin
\item addMemento: overwrite existing memento
\item addMemento: add several memento
\item getMementoNames: pluginname null
\item getMementoNames: pluginname empty
\item getMementoNames: pluginname unknown
\item getMementoNames: no Memento for plugin
\item getMementoNames: mementos listed

\item getMemento: mementoname null
\item getMemento: mementoname empty
\item getMemento: memento not existing
\item getMemento: pluginname null
\item getMemento: pluginname empty
\item getMemento: pluginname unknown
\end{itemize}
\paragraph*{Codeabdeckung}
73\% automatisiert
\paragraph*{gefundene Probleme}
\begin{itemize}
\item beschädigte Plugins werden nicht korrekt ausgefiltert
\item nach Initialisierung des PluginManagers hinzugefügte Plugins werden nicht nachgeladen
\end{itemize}


\section{Caretaker}
\paragraph*{Testfälle}
\begin{itemize}
\item caretaker singleton getter
\item getMemento: path null
\item getMemento: path empty
\item getMemento: targetfile not valid memento
\item getMemento: targetfile valid memento but no regular fileextension (.mem)
\item writeMemento / getMemento: valid write and read
\item writeMemento: file already exists
\item writeMemento: folder does not exist
\item writeMemento: file already exists and is readonly
\end{itemize}
\paragraph*{Codeabdeckung}
100\% automatisiert
\paragraph*{gefundene Probleme}
\begin{itemize}
\item Filestream wurde bei Ausnahmen nicht immer korrekt geschlossen
\end{itemize}



\section{Diagram}
\paragraph*{Testfälle}
\begin{itemize}
\item flushing a new Diagram
\item Clone
\item createExtraPluginInstance
\item setVideo: null
\item setVideo: null data
\item setVideo: empty data
\item setVideo: correct data
\item setVideo: processedBy null
\item setVideo: processedBy empty
\item setMemento
\item getMemento
\item propertyView
\item type
\item presentationType
\item namePlugin
\item threadSafe
\end{itemize}
\paragraph*{Codeabdeckung}
100\% automatisiert
\paragraph*{gefundene Probleme}
keine



\section{Macro}
\paragraph*{Testfälle}
\begin{itemize}
\item createExtraPluginInstance
\item setMemento: null
\item setMemento: null state
\item setMemento: state not valid
\item setMemento: state valid
\item getMemento: set before get
\item namePlugin
\item type
\item addMacroEntry: child valid macro, parent null
\item addMacroEntry: child valid filter, parent null
\item addMacroEntry: child filter add
\item addMacroEntry: child filter add with index
\item addMacroEntry: child added to itself
\item addMacroEntry EventHandler
\item removeMacroEntry: non existent
\item removeMacroEntry
\item moveMacroEntry
\item clearMacroEntryList
\end{itemize}
\paragraph*{Codeabdeckung}
29\% automatisiert
\paragraph*{gefundene Probleme}
\begin{itemize}
\item Da der Macro erst später vollständig implementiert war, traten eine Reihe Probleme zu Tage, die gerade noch in der Implementierung steckten.
\end{itemize}





\section{Smartnode}
\paragraph{Automatische Unittests}
\begin{itemize}
\item smarttree
\item name
\item id
\item idfather
\item Konstruktor: mit Smarttree
\item Konstruktor: ohne Smarttree
\item (equals)
\end{itemize}
\section{Codeabdeckung}
82 \%
\section{Project}
\begin{itemize}
\paragraph{Automatische Unittests}
\item Konstruktor
\item Smarttree
\item describtion
\item addNode: unbekannte father id
\item addNode: vid = null
\item addNode: id father = -1
\item addNode: id father = 0
\item rmNode: vid = null
\item rmNode: force = false
\item rmNode: force = true
\item rmNode: Knoten existiert nicht
\section{Codeabdeckung}
96 \%
\end{itemize}
\section{ProjectOpenDialog}
\paragraph{Automatische Unittests}
\begin{itemize}
\item Konstruktor
\end{itemize}
\paragraph{Automatische UI Tests}
\begin{itemize}
\item Abbrechen Button
\item Projekt erstellen in vorgegebenen Ordner: mit und ohne vorgegebenem Namen
\item Projekt erstellen über ">Browse"< funktion
\end{itemize}
\section{ProjectExplorer}
\paragraph{Automatische UI Tests}
\begin{itemize}
\item Videos hinzufügen: als Kind von anderen und als oberstes Element
\item Videos Löschen
\item Projekt öffnen
\item Video auswählen
\item Video als Referenz auswählen
\item Analyse betrachten 
\end{itemize}
\paragraph{Manuell getestet}
\begin{itemize}
\item Analyse exportieren
\item Falsche .yuf Dateien einlesen
\item falsche Dateien einlesen
\end{itemize}

\section{Video}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item Initialization: extra resources
\item Initialization: frame metric values
\item Handler: handler of video constructed with video info
\item Handler: handler of video constructed without video info
\item Handler: handler of video with invalid path
\end{itemize}

\paragraph*{Codeabdeckung}
100\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{YuvVideoInfo}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor with path
\item Initialization: constructor without path
\item Initialization: constructor with invalid path
\item Clone: create second instance of a video info
\item Frame Count: calculate frame count
\end{itemize}

\paragraph*{Codeabdeckung}
Unbekannt

\paragraph*{gefundene Probleme}
keine

\section{WelcomeView}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item Initialization: add projects to list
\item getMemento
\item setMemento
\item GUI Test: create new project with valid path
\item GUI Test: create new project with invalid path
\item GUI Test: open existing project from file explorer
\item GUI Test: select and open project with valid path from last projects
\item GUI Test: select and open non-existant project from last projects
\end{itemize}

\paragraph*{Codeabdeckung}
80\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{VideoImportOptionsDialog}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor with valid path list
\item Initialization: constructor with null
\item Showing property view of video handler
\item Importing video
\item Importing invalid video
\item Cancelling import
\item Closing window
\end{itemize}

\paragraph*{Codeabdeckung}
49\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{YuvVideoHandler}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor of handler
\item Initialization: set read context to valid path and video info
\item Initialization: set read context to invalid path and video info
\item Initialization: set read context to invalid path with valid video info
\item Initialization: set read context to valid path with invalid video info
\item Initialization: set import context to valid path
\item Initialization: set import context to invalid path
\item Initialization: set write context without setting read context
\item Initialization: set write context after setting read context
\item Initialization: set write context to invalid path and video info
\item Initialization: set write context to invalid path with valid video info
\item Initialization: set write context to valid path with invalid video info
\item Flushing the reader
\item Flushing the writer
\item getMemento
\item setMemento
\item getFrame: reading all frames of a video
\item getFrame: reading a frame out of video range
\item writeFrames: writing a frame array within bounds of frame count
\item writeFrames: writing a frame array out of bounds
\item writeFrames: writing at position -1
\item writeFrames: writing null frames
\end{itemize}

\paragraph*{Codeabdeckung}
Unbekannt

\paragraph*{gefundene Probleme}
getFrame might return null if a race condition between the loop containing the call to getFrame, and the buffer occurs
\section{Pluginlist}
\paragraph{Manuell getestet}
\begin{itemize}
\item Plugins erkennen
\item Mementos öffnen
\item Mementos Speichern
\item Mementos löschen
\item dem Macro mementos übertragen
\item dem Macro Plugins Übertragen
\item PluginProperties View zeigen: vorhanden
\item PluginProperties View zeigen: nicht vorhanden
\end{itemize}


\section{Presentation}
\paragraph{Manuell getestet}
(wurde anhand des alten Macros getestet)
\begin{itemize}
\item Player anzeigen
\item zwei Player anzeigen
\item Diagramm anzeigen
\item Ansichtswechsel: Filter zu Metrik und umgekehrt
\item Ansichtswechsel: von Metrik und Filter zu Analyse
\item Drag-and-Drop auf beide Player
\item flush
\end{itemize}

\section{Player}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item InitializeComponentTest
\item createExtraPluginInstanceTest
\item CopyMemoryTest
\item OnPropertyChangedTest: random Jump Position Update
\item OnPropertyChangedTest: next Frame Position Update
\item OnPropertyChangedTest: pos Read Pro Name
\item OnPropertyChangedTest: fps Ind Pro Name
\item PauseClickTest
\item PlayClickTest
\item ConnectTest
\item flushTest
\item getMementoTest
\item jumpToFrameTextBoxGotFocusTest
\item nextFrameClickTest
\item positionSliderDragStartedTest
\item positionSliderDragDeltaTest
\item setMementoTest
\item setVideoTest
\item setVideoTest1
\item slowDownButtonClickTest
\item speedUpButtonClickTest
\item fpsIndicatorValueTest
\item namePluginTest
\item pausePlayTickerTest
\item playTickerTimeoutTest
\item positionReaderTest
\item presentationTypeTest
\item propertyViewTest
\item typeTest
\item getFrameTest
\item jumpToFrameClickTest
\item playTickerThreadTest
\end{itemize}

\paragraph*{Codeabdeckung}
80\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{Invert}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Memento is set
\item getMementoTest: is Memento
\item localTest
\item processTest
\item processTest: does not return same Bitmap
\item processTest: empty Bitmap
\item setMementoTest: empty
\item setMementoTest: not Memento
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
81\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{Convolution}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item processTest
\item setMementoTest
\item matrixTest
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
81\% automatisiert

\paragraph*{gefundene Probleme}
Matrix ist auf ein quadratisches Rechteck von der Größe [3,25] beschränkt

\section{NoiseGenerator}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item localTest
\item processTest
\item setMementoTest
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
69\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{Greyscale}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item localTest
\item processTest
\item processTest: empty Bitmap
\item setMementoTest
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
69\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{RelativeColor}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item localTest
\item processTest
\item processTest: empty Bitmap
\item setMementoTest
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
73\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{MSE}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item localTest
\item analyseTest
\item analyseTest: empty Bitmap
\item setMementoTest
\item setMementoTest: Object has to be in range [0, 3]
\item setMementoTest: Object is not type int
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
51\% automatisiert

\paragraph*{gefundene Probleme}
keine

\section{PSNR}
\paragraph*{Testfälle}
\begin{itemize}
\item Initialization: constructor
\item getMementoTest: start Mememento is set
\item analyseTest
\item setMementoTest
\item namePluginTest
\item propertyViewTest
\item typeTest
\end{itemize}

\paragraph*{Codeabdeckung}
80\% automatisiert

\paragraph*{gefundene Probleme}
keine
